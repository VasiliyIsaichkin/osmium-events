(()=>{"use strict";var t={671:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(839),e),r(i(159),e),r(i(685),e);const s=i(839),a=i(159),o=i(685);e.default={...s,...a,...o}},159:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateParallelLimit=e.iterateParallel=e.iterateKeys=e.iterate=void 0;const n=i(839);function r(t,e,i,s){let a=!1;function o(t){let e={break:()=>a=!0,accKeyName:t,key:t=>e.accKeyName=t};return e}let c=async(t,i)=>{let n=o(i);f(await e(t,i,n),n)},u=(t,i)=>{let n=o(i);f(e(t,i,n),n)},l=n.isObject(i)||n.isArray(i)||n.isString(i)||n.isInteger(i)?i:!1!==i&&t,f=(t,e)=>{n.isUndefined(t)||(n.isObject(i)&&(l[e.accKeyName]=s?Object.assign(l[e.accKeyName]||{},t):t),n.isArray(i)&&l.push(t),n.isString(i)&&(l+=t?n.isFunction(t.toString)?t.toString(n.isInteger(t)?void 0:"utf8"):t+"":""),n.isInteger(i)&&(l+=n.isInteger(t)?t:parseInt(t)),!1===i&&(l=l||t))};return n.isAsyncFunction(e)?new Promise((async(e,i)=>{try{if(n.isArray(t)){for(let e=0;e<t.length&&!a;++e)await c(t[e],e);e(l)}if(n.isObject(t)&&(await r(Object.keys(t),(async(e,i,n)=>{a&&n.break(),await c(t[e],e)})),e(l)),n.isInteger(t)){for(let e=0;e<t&&!a;++e)await c(e,e);e(l)}}catch(t){i(t)}e(!1)})):(()=>{if(n.isArray(t)){for(let e=0;e<t.length&&!a;++e)u(t[e],e);return l}if(n.isObject(t))return r(Object.keys(t),((e,i,n)=>{a&&n.break(),u(t[e],e)})),l;if(n.isInteger(t)){for(let e=0;e<t&&!a;++e)u(e,e);return l}return!1})()}e.iterate=r,e.iterateKeys=function(t,e,i,s){return n.isAsyncFunction(e)?(async()=>await r(t,(async(t,i,n)=>await e(i,t,n)),i,s))():r(t,((t,i,n)=>e(i,t,n)),i,s)},e.iterateParallel=async function(t,e){return Promise.all(r(t,((t,i,n)=>(async()=>await e(t,i,n))()),[]))},e.iterateParallelLimit=async function(t,e,i){let s=0,a=0;return n.isArray(e)&&(s=e.length),n.isObject(e)&&(s=Object.keys(e).length),0===s?[]:r(Math.ceil(s/t),(async o=>{let c=r(t,((r,c,u)=>{if(a>=s)return u.break();a++;const l=o*t+c,f=n.isObject(e)?Object.keys(e)[l]:l,p=e[f];return(async()=>await i(p,f,u))()}),[]);return Promise.all(c)}),[])}},685:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=e.toArray=e.setDefaults=e.objectToArray=e.nop$=e.nop=e.escapeRegExp=e.arrayToObject=e.UID=e.GUID=void 0;const n=i(159),r=i(839);e.GUID=function(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"){return t.replace(/[xy]/g,(t=>{let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},e.UID=function(t="",e="xxxxxxxxxxxxxxxxxx-xxxxxx"){return`${t}${e}`.replace(/[x]/g,(()=>(36*Math.random()|0).toString(36)[Math.random()>=.5?"toUpperCase":"toLowerCase"]()))},e.arrayToObject=function(t,e){return n.iterate(t,((t,i,n)=>e?((r.isInteger(t)||r.isString(t))&&n.key(i+1),t):(n.key(t),i+1)),{})},e.objectToArray=function(t,e){return n.iterate(t,((t,i)=>e?i:t),[])},e.toArray=function(t){return r.isArray(t)?t:[t]},e.nop=function(){},e.nop$=async function(){return new Promise((t=>t()))},e.setDefaults=function(t,e,i){return r.isUndefined(t[e])&&(t[e]=i),t},e.escapeRegExp=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},e.delay=async function(t){return new Promise((e=>setTimeout(e,t||100)))}},839:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asyncFunctionPattern=e.isObject=e.isUndefined=e.isSymbol=e.isRegExp=e.isPositiveInteger=e.isNumber=e.isNull=e.isIterable=e.isNativeObject=e.isJSON=e.isInteger=e.isAsyncFunction=e.isGUIDv4=e.isGUID=e.isFunction=e.isFloat=e.isEmptyObject=e.isEmptyArray=e.isBoolean=e.isString=e.isArray=void 0;const i="$TvNd3G0XQ1gN";function n(t,e){return!a(e)&&!s(e)&&e.constructor&&e.constructor.name===t}function r(t,e=""){return!!t&&(n("AsyncFunction",t)||n("Function",t)&&(t.toString().indexOf(e.length>1?e:i)>0||t.toString().indexOf("return __awaiter(this")>0&&t.toString().indexOf("return __generator(this")>0))}function s(t){return"[object Null]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function o(t){return n("Array",t)}function c(t){return"[object Object]"==={}.toString.call(t)}function u(t){return n("String",t)}function l(t){return Number.isFinite(t)&&!isNaN(parseFloat(t))}function f(t){return Number.isSafeInteger(t)}e.asyncFunctionPattern=i,e.isAsyncFunction=r,e.isNull=s,e.isUndefined=a,e.isFunction=function(t){return n("Function",t)||r(t)},e.isArray=o,e.isEmptyArray=function(t){return o(t)&&0===t.length},e.isObject=c,e.isEmptyObject=function(t){return c(t)&&0===Object.keys(t).length},e.isNativeObject=function(t){return n("Object",t)},e.isString=u,e.isBoolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},e.isNumber=l,e.isInteger=f,e.isFloat=function(t){return l(t)&&!f(t)},e.isPositiveInteger=function(t){return f(t)&&t>=0},e.isSymbol=function(t,e=!1){return"symbol"==typeof t&&(!e||t.description===e)},e.isIterable=function(t){return!!c(t)&&!!Object.keys(t).length||!!o(t)&&!!t.length},e.isJSON=function(t){if(!u(t))return!1;try{const e=JSON.parse(t);return!!e&&"object"==typeof e}catch(t){}return!1},e.isGUIDv4=function(t){return u(t)&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(t)},e.isGUID=function(t){return u(t)&&/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i.test(t)},e.isRegExp=function(t){return n("RegExp",t)||r(t)}},22:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.Events=e.EventInformation=void 0;const s=i(671);class a{constructor(t,e){this.cb=t,this.time=e}}e.EventInformation=a;class o{constructor(t=!1){this.eventIdPrefix="#",this.eventsList={},this.eventMappers=[],this.eventMappersAfter=[],this.middlewares=[],this.middlewaresAfter=[],this.UNDEFINED=Symbol("UNDEFINED"),this.defaultChain=t}getUID(){return s.UID(this.eventIdPrefix)}clear(){this.eventsList={}}reset(){this.middlewares=[],this.middlewaresAfter=[],this.eventMappers=[],this.eventMappersAfter=[],this.clear()}off(t,e=!1){const i={};return s.iterate(s.toArray(t),(t=>{if(this.eventsList[t])return i[t]=Object.keys(this.eventsList[t]),void delete this.eventsList[t];if(e)return void(i[t]=!1);let n=t.slice(0,-1*this.getUID().length);this.eventsList[n]?(i[n]=i[n]||[],i[n].push(t),delete this.eventsList[n][t]):i[n]=!1})),i}offEvent(t){return this.off(t,!0)}useFirst(t){return this.middlewares.unshift(t)}use(t){return this.middlewares.push(t)}unUse(t){this.middlewares.splice(t-1,1)}useAfterFirst(t){return this.middlewaresAfter.unshift(t)}useAfter(t){return this.middlewaresAfter.push(t)}unUseAfter(t){this.middlewaresAfter.splice(t-1,1)}getEventsList(){return Object.keys(this.eventsList)}getEvents(t){return s.iterate(this.eventsList,((e,i)=>i.match(new RegExp(`^${t}$`,"gi"))?i:void 0),[])}mapEvents(t,e=!1){return this.eventMappers.push({list:e,target:t})}unmapEvents(t){this.eventMappers.splice(t-1,1)}mapEventsAfter(t,e=!1){return this.eventMappersAfter.push({list:e,target:t})}unmapEventsAfter(t){this.eventMappersAfter.splice(t-1,1)}exists(t,e=!1){let i=!1;return e&&(s.iterate(this.eventMappers.concat(this.eventMappersAfter),(e=>{e.target.exists(t)&&(i=!0)})),i)?i:s.isRegExp(t)?s.iterate(this.getEventsList(),(e=>!!e.match(t)),!1):!!this.eventsList[t]}on(t,e){const i=(t,e)=>{let i=`${t}${this.getUID()}`;return this.eventsList[t]=this.eventsList[t]||{},this.eventsList[t][i]=new a(e,Date.now()),i};return s.isObject(t)?s.iterateKeys(t,i,[]):!!s.isFunction(e)&&i(t,e)}once(t,e){const i=(t,e)=>{let i=this.on(t,(async(...t)=>(this.off(i),e(...t))));return i};return s.isObject(t)?s.iterateKeys(t,i,[]):!!s.isFunction(e)&&i(t,e)}wait(t,e=!1){return new Promise((i=>this.once(t,(async(...t)=>{const n=await(e||s.nop$)(...t);return i(t),n}))))}async emitEx(t,e,i,...n){let r,a=[],o={};const c=i||{};c.context=c.context||this;const u=e=>s.iterate(e,(e=>{s.isFunction(e.target.emit)&&(!1===e.list||s.arrayToObject(e.list)[t])&&a.push(e.target.emitEx(t,!1,{context:c.context,preCall:c.preCall,fromMapper:!0},...n))})),l=async e=>{await s.iterate(e,(async e=>{s.isFunction(e.target.emit)&&(!1===e.list||s.arrayToObject(e.list)[t])&&Object.assign(o,await e.target.emitEx(t,!0,{context:c.context,preCall:c.preCall,fromMapper:!0},...n))}))};return Object.assign(c,{ignore:!1,ignoreFalse:!1,dontExit:!1}),c.ignore||await s.iterate(this.middlewares,(async e=>{if(!s.isFunction(e))return;const i=await e.apply(c.context,[t,c,...n]);s.isArray(i)&&(n=i),s.isObject(i)&&(r=i)})),r&&!c.dontExit?r.ret:(await(e?l:u)(this.eventMappers),e?await s.iterate(this.eventsList[t],(async(t,e,i)=>{i.key(e),s.isFunction(c.preCall)&&"function"==typeof c.preCall&&(n=await c.preCall(t.cb,n,e,c,this));const r=await t.cb.apply(c.context,n);return s.isUndefined(r)?this.UNDEFINED:r}),o):(await s.iterate(this.eventsList[t],(async(t,e)=>(c.preCall&&s.isFunction(c.preCall)&&(n=await c.preCall(t.cb,n,e,c,this)),a.push(t.cb.apply(c.context,n))))),o=await Promise.all(a),a=[]),e?await l(this.eventMappersAfter):u(this.eventMappersAfter),e||o.concat(await Promise.all(a)),await s.iterate(this.middlewaresAfter,(async e=>{const i=await e.apply(c.context,[t,c,o,...n]);s.isUndefined(i)||(o=i)})),o)}async emit(t,...e){return this.defaultChain?this.emitChain(t,...e):this.emitParallel(t,...e)}async emitParallel(t,...e){return await this.emitEx(t,!1,!1,...e)}async emitChain(t,...e){return await this.emitEx(t,!0,!1,...e)}}e.Events=o,r(i(256),e),e.default={Events:o}},256:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})}},e={},i=function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}(22),n=exports;for(var r in i)n[r]=i[r];i.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();